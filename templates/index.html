<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Math stories and logic puzzles help kids learn math through engaging storytelling and problem solving.">
    <title>Logic and Stories | Math Stories & Logic Puzzles for Kids</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/static/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/static/favicon-512x512.png">
    <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">
    
    <!-- Social Media Meta Tags -->
    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://logicandstories.com/">
    <meta property="og:title" content="Logic & Stories | Math Learning Through Storytelling">
    <meta property="og:description" content="Engaging math education for kids with interactive stories and logic puzzles. Help your child learn math through captivating storytelling and problem-solving adventures.">
    <meta property="og:image" content="https://logicandstories.com/static/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Logic & Stories - Math Learning Through Storytelling">
    <meta property="og:site_name" content="Logic & Stories">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://logicandstories.com/">
    <meta name="twitter:title" content="Logic & Stories | Math Learning Through Storytelling">
    <meta name="twitter:description" content="Engaging math education for kids with interactive stories and logic puzzles.">
    <meta name="twitter:image" content="https://logicandstories.com/static/twitter-card.png">
    <meta name="twitter:image:alt" content="Logic & Stories - Educational math platform for kids">
    
    <!-- Additional SEO -->
    <meta name="keywords" content="math education, kids learning, storytelling, logic puzzles, educational games, math stories, children math, interactive learning">
    <link rel="canonical" href="https://logicandstories.com/">
    
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/animations.css">
    <style>
        html {
            scroll-behavior: smooth;
        }
        [data-src] {
            filter: blur(5px);
            transition: filter 0.5s;
        }
        [data-src].fade-in {
            filter: blur(0);
        }
        body {
            font-family: 'Nunito', sans-serif;
        }
        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }
        .gradient-text {
            background: linear-gradient(to right, #fde047, #fb923c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .glow-button {
            box-shadow: 0 0 15px rgba(253, 224, 71, 0.5), 0 0 5px rgba(251, 146, 60, 0.4);
        }
        /* Styles for the modal */
        .modal-hidden {
            display: none !important; /* Ensures modals are hidden correctly */
        }
        .modal {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .theme-button.selected {
            transform: scale(1.05);
            box-shadow: 0 0 10px #fde047;
            border-color: #fde047;
        }
        /* FAQ Styles */
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        }
        .faq-question svg {
            transition: transform 0.3s ease-out;
        }
        /* Hide tour and level elements on index page */
        [id*="tour"], [class*="tour"], 
        [id*="level"], [class*="level"],
        .tour-overlay, .level-display {
            display: none !important;
        }
    </style>
</head>
<body class="bg-slate-900 text-gray-200">
    <script src="/static/js/secureDOM.js"></script>
    <script src="/static/js/csrf.js"></script>
    <script src="/static/js/mobileNav.js" defer></script>
    <script src="/static/js/lazyLoad.js" defer></script>
    <script src="/static/js/accessibility.js" defer></script>

    <!-- Header -->
    <header class="bg-slate-900/80 backdrop-blur-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/" class="text-3xl font-pacifico gradient-text pb-1 leading-normal">Logic and Stories</a>
            <button id="mobile-menu-toggle" class="md:hidden text-gray-200 focus:outline-none" aria-label="Toggle mobile menu" aria-expanded="false">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
            </button>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#stories" class="hover:text-yellow-400 transition-colors">Stories</a>
                <a href="#pricing" class="hover:text-yellow-400 transition-colors">Pricing</a>
                <a href="#faq" class="hover:text-yellow-400 transition-colors">FAQ</a>
            </div>
            <div id="auth-links" class="flex items-center space-x-4">
                <a href="/signin.html" class="bg-yellow-400 text-slate-900 font-bold py-2 px-4 rounded-full hover:bg-yellow-300 transition-all transform hover:scale-105 glow-button button-press">Sign In</a>
                <a href="/signup.html" class="bg-yellow-400 text-slate-900 font-bold py-2 px-5 rounded-full hover:bg-yellow-300 transition-all transform hover:scale-105 glow-button pulse-glow button-press">
                    Start Free Trial
                </a>
            </div>
             <div id="welcome-message" class="hidden items-center space-x-4">
                <span id="welcome-username-display" class="font-semibold text-white"></span>
                <a href="/dashboard.html" class="text-yellow-400 hover:underline">Go to Dashboard</a>
                <a href="#" id="signOutButton" class="bg-gray-700 text-white font-bold py-2 px-5 rounded-full hover:bg-gray-600 transition-colors">Sign Out</a>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden px-6 pb-4">
            <a href="#stories" class="block py-2 hover:text-yellow-400">Stories</a>
            <a href="#pricing" class="block py-2 hover:text-yellow-400">Pricing</a>
            <a href="#faq" class="block py-2 hover:text-yellow-400">FAQ</a>
        </div>
    </header>

    <main id="main-content" role="main">
        <!-- Hero Section -->
        <section class="py-20 md:py-32 animate-on-scroll" role="region" aria-label="Hero section">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">
                    Unlock the Magic of Math with <br><span class="gradient-text">Stories & Logic Puzzles</span>.
                </h1>
                <p class="text-lg md:text-xl text-gray-400 max-w-3xl mx-auto mb-8">
                    Say goodbye to boring drills. Logic and Stories transforms complex math concepts into captivating stories that ignite curiosity and build a genuine love for learning.
                </p>
                <div class="flex justify-center items-center space-x-4">
                    <a href="#pricing" class="bg-yellow-400 text-slate-900 font-bold py-3 px-8 rounded-full hover:bg-yellow-300 transition-all transform hover:scale-105 glow-button button-press">
                        Explore Plans
                    </a>
                    <a href="#stories" class="bg-gray-700 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-600 transition-colors button-press">
                        See Sample Stories
                    </a>
                </div>
            </div>
        </section>

        <!-- "How It Works" Section -->
        <section id="how-it-works" class="py-20 bg-slate-800/50" role="region" aria-label="How it works">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Learning Math Through Stories is an Adventure</h2>
                    <p class="text-gray-400 mt-2">Follow these simple steps to begin your journey.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 hover-lift animate-on-scroll">
                        <div class="flex justify-center items-center mb-4">
                             <svg class="w-16 h-16 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Choose Your Plan</h3>
                        <p class="text-gray-400">Select a subscription that fits your family's needs. Get started with a 7-day free trial.</p>
                    </div>
                    <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 hover-lift animate-on-scroll">
                        <div class="flex justify-center items-center mb-4">
                            <svg class="w-16 h-16 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7H4a2 2 0 00-2 2v6a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2z"></path></svg>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Pick a Story & Theme</h3>
                        <p class="text-gray-400">Dive into our library and choose a story. Then, select your favorite theme: Detective, Fantasy, or Indian Epics!</p>
                    </div>
                    <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 hover-lift animate-on-scroll">
                        <div class="flex justify-center items-center mb-4">
                            <svg class="w-16 h-16 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path></svg>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Watch Them Thrive</h3>
                        <p class="text-gray-400">See your child's confidence and skills grow as they solve problems and master concepts through narrative.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Story Showcase Section -->
        <section id="stories" class="py-20" role="region" aria-label="Featured stories">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Featured Adventures</h2>
                    <p class="text-gray-400 mt-2">A sneak peek into our world of mathematical tales.</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="story-card bg-slate-800 rounded-2xl overflow-hidden group transform transition-transform duration-300 hover:-translate-y-2 flex flex-col cursor-pointer" data-story-title="The Fraction Forest" data-story-img="https://placehold.co/600x400/1e293b/fde047?text=The+Fraction+Forest">
                        <div class="p-6" style="background-color: #fde047;"><h3 class="text-2xl font-bold text-slate-900 text-center">The Fraction Forest</h3></div>
                        <div class="p-6 flex flex-col flex-grow">
                            <p class="text-sm text-yellow-400 font-semibold mb-3">Concepts: Fractions, Equivalence</p>
                            <p class="text-gray-400 flex-grow">Join siblings Lily and Tom as they navigate a magical forest where trees grow in fractional parts and rivers flow in halves and quarters.</p>
                             <div class="mt-4 pt-4 border-t border-slate-700">
                                <h4 class="text-sm font-semibold text-gray-300 mb-2">Available Themes:</h4>
                                <div class="flex flex-wrap gap-2">
                                    <span class="text-xs font-semibold bg-blue-900/50 text-blue-300 py-1 px-2 rounded-full">Detective</span>
                                    <span class="text-xs font-semibold bg-purple-900/50 text-purple-300 py-1 px-2 rounded-full">Fantasy</span>
                                    <span class="text-xs font-semibold bg-orange-900/50 text-orange-300 py-1 px-2 rounded-full">Indian Epics</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="story-card bg-slate-800 rounded-2xl overflow-hidden group transform transition-transform duration-300 hover:-translate-y-2 flex flex-col cursor-pointer" data-story-title="The Geometry Castle" data-story-img="https://placehold.co/600x400/1e293b/fb923c?text=Geometry+Castle">
                        <div class="p-6" style="background-color: #fb923c;"><h3 class="text-2xl font-bold text-slate-900 text-center">Geometry Castle</h3></div>
                        <div class="p-6 flex flex-col flex-grow">
                            <p class="text-sm text-yellow-400 font-semibold mb-3">Concepts: Shapes, Angles, Area</p>
                            <p class="text-gray-400 flex-grow">A young architect must use their knowledge of shapes and angles to design and escape a shape-shifting magical castle.</p>
                             <div class="mt-4 pt-4 border-t border-slate-700">
                                <h4 class="text-sm font-semibold text-gray-300 mb-2">Available Themes:</h4>
                                <div class="flex flex-wrap gap-2">
                                    <span class="text-xs font-semibold bg-blue-900/50 text-blue-300 py-1 px-2 rounded-full">Detective</span>
                                    <span class="text-xs font-semibold bg-purple-900/50 text-purple-300 py-1 px-2 rounded-full">Fantasy</span>
                                    <span class="text-xs font-semibold bg-orange-900/50 text-orange-300 py-1 px-2 rounded-full">Indian Epics</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="story-card bg-slate-800 rounded-2xl overflow-hidden group transform transition-transform duration-300 hover:-translate-y-2 flex flex-col cursor-pointer" data-story-title="The Algebra Alley" data-story-img="https://placehold.co/600x400/1e293b/a78bfa?text=The+Algebra+Alley">
                        <div class="p-6" style="background-color: #a78bfa;"><h3 class="text-2xl font-bold text-slate-900 text-center">The Algebra Alley</h3></div>
                        <div class="p-6 flex flex-col flex-grow">
                            <p class="text-sm text-yellow-400 font-semibold mb-3">Concepts: Variables, Equations</p>
                            <p class="text-gray-400 flex-grow">Solve for 'x' to unlock secrets and navigate the mysterious alleyways where every sign is an equation waiting to be solved.</p>
                             <div class="mt-4 pt-4 border-t border-slate-700">
                                <h4 class="text-sm font-semibold text-gray-300 mb-2">Available Themes:</h4>
                                <div class="flex flex-wrap gap-2">
                                    <span class="text-xs font-semibold bg-blue-900/50 text-blue-300 py-1 px-2 rounded-full">Detective</span>
                                    <span class="text-xs font-semibold bg-purple-900/50 text-purple-300 py-1 px-2 rounded-full">Fantasy</span>
                                    <span class="text-xs font-semibold bg-orange-900/50 text-orange-300 py-1 px-2 rounded-full">Indian Epics</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="py-20 bg-slate-800/50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Choose Your Adventure Plan</h2>
                    <p class="text-gray-400 mt-2">Simple, transparent pricing. Cancel anytime.</p>
                </div>
                <div class="flex flex-col lg:flex-row justify-center items-center gap-8">
                    <div class="w-full lg:w-1/3 bg-slate-800 p-8 rounded-2xl border border-slate-700">
                        <h3 class="text-2xl font-bold text-white text-center">Monthly</h3>
                        <p class="text-center text-gray-400 mt-2">Perfect for trying things out.</p>
                        <p class="text-5xl font-extrabold text-white text-center my-6">$12<span class="text-lg font-medium text-gray-400">/mo</span></p>
                        <ul class="space-y-4 text-gray-300">
                            <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Access to all stories & themes</li>
                            <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>1 student profile</li>
                            <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>New stories monthly</li>
                        </ul>
                        <a href="/signup.html?plan=monthly" class="plan-button w-full mt-8 block text-center bg-gray-700 text-white font-bold py-3 px-6 rounded-full hover:bg-gray-600 transition-colors">Choose Plan</a>
                    </div>
                    <div class="w-full lg:w-1/3 bg-slate-800 p-8 rounded-2xl border-2 border-yellow-400 relative transform lg:scale-110">
                        <div class="absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2">
                            <span class="bg-yellow-400 text-slate-900 text-sm font-bold px-4 py-1 rounded-full">BEST VALUE</span>
                        </div>
                        <h3 class="text-2xl font-bold text-white text-center">Annual</h3>
                        <p class="text-center text-gray-400 mt-2">Save 25% and learn all year.</p>
                        <p class="text-5xl font-extrabold text-white text-center my-6">$9<span class="text-lg font-medium text-gray-400">/mo</span></p>
                        <ul class="space-y-4 text-gray-300">
                           <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Access to all stories & themes</li>
                           <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Up to 3 student profiles</li>
                           <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>New stories monthly</li>
                           <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Early access to new content</li>
                        </ul>
                        <a href="/signup.html?plan=annual" class="plan-button best-value w-full mt-8 block text-center bg-yellow-400 text-slate-900 font-bold py-3 px-6 rounded-full hover:bg-yellow-300 transition-all transform hover:scale-105 glow-button">Start Free Trial</a>
                    </div>
                    <div class="w-full lg:w-1/3 bg-slate-800 p-8 rounded-2xl border border-slate-700">
                        <h3 class="text-2xl font-bold text-white text-center">Family</h3>
                        <p class="text-center text-gray-400 mt-2">For the whole adventuring crew.</p>
                        <p class="text-5xl font-extrabold text-white text-center my-6">$18<span class="text-lg font-medium text-gray-400">/mo</span></p>
                        <ul class="space-y-4 text-gray-300">
                            <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Access to all stories & themes</li>
                            <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Up to 5 student profiles</li>
                            <li class="flex items-center"><svg class="w-5 h-5 text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Priority support</li>
                        </ul>
                        <a href="/signup.html?plan=family" class="plan-button w-full mt-8 block text-center bg-gray-700 text-white font-bold py-3 px-6 rounded-full hover:bg-gray-600 transition-colors">Choose Plan</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Loved by Parents & Students</h2>
                    <p class="text-gray-400 mt-2">Don't just take our word for it.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                        <p class="text-gray-300 mb-4">"My son used to dread math homework. Now he ASKS to do Logic and Stories. It's been a complete game-changer for our family."</p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/40x40/fde047/1e293b?text=S" class="w-10 h-10 rounded-full mr-4" alt="" role="presentation">
                            <div>
                                <p class="font-bold text-white">Sarah J.</p>
                                <p class="text-sm text-gray-400">Parent of a 7th Grader</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                        <p class="text-gray-300 mb-4">"As a teacher, I'm always looking for engaging resources. The way Logic and Stories weaves curriculum topics into stories is brilliant. Highly recommended."</p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/40x40/fb923c/1e293b?text=M" class="w-10 h-10 rounded-full mr-4" alt="" role="presentation">
                            <div>
                                <p class="font-bold text-white">Mark T.</p>
                                <p class="text-sm text-gray-400">High School Math Teacher</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                        <p class="text-gray-300 mb-4">"The Algebra Alley was my favorite! I didn't even realize I was learning about variables until the end. It was just a fun quest."</p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/40x40/a78bfa/1e293b?text=E" class="w-10 h-10 rounded-full mr-4" alt="" role="presentation">
                            <div>
                                <p class="font-bold text-white">Alex P.</p>
                                <p class="text-sm text-gray-400">Age 14</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-20 bg-slate-800/50">
            <div class="container mx-auto px-6 max-w-3xl">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Frequently Asked Questions</h2>
                </div>
                <div class="space-y-4">
                    <div class="faq-item bg-slate-800 rounded-lg">
                        <div class="faq-question p-4 cursor-pointer flex justify-between items-center">
                            <span class="font-semibold text-lg text-white">What grade level is Logic and Stories for?</span>
                            <svg class="w-5 h-5 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="faq-answer px-4 pb-4">
                            <p class="text-gray-300 mt-2">Our stories are designed primarily for students in 4th to 10th grade. The content is crafted to align with common core standards for these grade levels, making complex topics accessible and fun.</p>
                        </div>
                    </div>
                    <div class="faq-item bg-slate-800 rounded-lg">
                        <div class="faq-question p-4 cursor-pointer flex justify-between items-center">
                            <span class="font-semibold text-lg text-white">What are the story themes?</span>
                            <svg class="w-5 h-5 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="faq-answer px-4 pb-4">
                            <p class="text-gray-300 mt-2">Every story in our library can be experienced in three exciting themes: Detective, Fantasy, and Indian Epics. While the core math problems remain the same, the narrative, characters, and illustrations change to match the theme, offering a fresh adventure with every choice!</p>
                        </div>
                    </div>
                    <div class="faq-item bg-slate-800 rounded-lg">
                        <div class="faq-question p-4 cursor-pointer flex justify-between items-center">
                            <span class="font-semibold text-lg text-white">Can I cancel my subscription anytime?</span>
                            <svg class="w-5 h-5 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="faq-answer px-4 pb-4">
                            <p class="text-gray-300 mt-2">Absolutely. You can cancel your subscription at any time from your account dashboard. You will retain access until the end of your current billing period.</p>
                        </div>
                    </div>
                    <div class="faq-item bg-slate-800 rounded-lg">
                        <div class="faq-question p-4 cursor-pointer flex justify-between items-center">
                            <span class="font-semibold text-lg text-white">What math topics are covered?</span>
                            <svg class="w-5 h-5 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="faq-answer px-4 pb-4">
                            <p class="text-gray-300 mt-2">We cover a wide range of topics, including fractions, geometry, measurement, pre-algebra, Algebra I & II, and advanced problem-solving strategies. Our library is constantly expanding to include new concepts!</p>
                        </div>
                    </div>
                    <div class="faq-item bg-slate-800 rounded-lg">
                        <div class="faq-question p-4 cursor-pointer flex justify-between items-center">
                            <span class="font-semibold text-lg text-white">Is it compatible with tablets and phones?</span>
                            <svg class="w-5 h-5 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="faq-answer px-4 pb-4">
                            <p class="text-gray-300 mt-2">Yes! Logic and Stories is a web-based platform that works beautifully on desktops, laptops, tablets, and smartphones. No app installation required.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 border-t border-slate-800">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <a href="/" class="text-2xl font-pacifico gradient-text pb-1 leading-normal">Logic and Stories</a>
                    <p class="text-gray-400 mt-2">Making math magical for the next generation of thinkers and innovators.</p>
                </div>
                <div>
                    <h4 class="font-bold text-white mb-4">Navigate</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#stories" class="hover:text-yellow-400">Stories</a></li>
                        <li><a href="#pricing" class="hover:text-yellow-400">Pricing</a></li>
                        <li><a href="#faq" class="hover:text-yellow-400">FAQ</a></li>
                        <li><a href="/blog.html" class="hover:text-yellow-400">Blog</a></li>
                    </ul>
                </div>
                 <div>
                    <h4 class="font-bold text-white mb-4">Legal</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="/terms-of-service.html" class="hover:text-yellow-400">Terms of Service</a></li>
                        <li><a href="/privacy-policy.html" class="hover:text-yellow-400">Privacy Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-white mb-4">Follow Us</h4>
                    <div class="flex space-x-4">
                        <a href="https://facebook.com/LogicAndStories" class="text-gray-400 hover:text-yellow-400" aria-label="Facebook" target="_blank" rel="noopener noreferrer"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg></a>
                        <a href="https://twitter.com/LogicAndStories" class="text-gray-400 hover:text-yellow-400" aria-label="Twitter" target="_blank" rel="noopener noreferrer"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" /></svg></a>
                        <a href="https://instagram.com/LogicAndStories" class="text-gray-400 hover:text-yellow-400" aria-label="Instagram" target="_blank" rel="noopener noreferrer"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.013-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.08 2.465c.636-.247 1.363-.416 2.427-.465C9.53 2.013 9.884 2 12.315 2zM12 0C9.58 0 9.22.01 8.05.057c-1.17.055-2.005.226-2.72.497-.73.27-1.35.64-1.944 1.234-.595.595-1.04 1.214-1.234 1.944-.27.715-.44 1.55-.497 2.72C.01 9.22 0 9.58 0 12s.01 2.78.057 3.95c.055 1.17.226 2.005.497 2.72.27.73.64 1.35 1.234 1.944.595.595 1.214 1.04 1.944 1.234.715.27 1.55.44 2.72.497C9.22 23.99 9.58 24 12 24s2.78-.01 3.95-.057c-1.17-.055-2.005-.226-2.72-.497-.73-.27-1.35-.64-1.944-1.234-.595-.595-1.04-1.214-1.234-1.944-.27-.715-.44-1.55-.497-2.72-.048-1.17-.057-1.52-.057-3.95s-.01-2.78-.057-3.95c-.055-1.17-.226-2.005-.497-2.72-.27-.73-.64-1.35-1.234-1.944-.595-.595-1.214-1.04-1.944-1.234-.715-.27-1.55-.44-2.72-.497C14.78.01 14.42 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.88 1.44 1.44 0 000-2.88z" clip-rule="evenodd" /></svg></a>
                    </div>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-slate-800 text-center text-gray-500">
                <p>Â© 2024 Logic and Stories. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Modals -->
<div id="storyModal" class="modal modal-hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center opacity-0"><div class="modal-content bg-slate-800 rounded-2xl p-8 max-w-lg w-full mx-4 relative scale-95 text-center"><button id="closeStoryModalButton" class="absolute top-4 right-4 text-gray-400 hover:text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button><img id="storyModalImage" src="" alt="Story preview illustration" loading="lazy" class="w-full h-64 object-cover rounded-lg mb-4"><h2 id="storyModalTitle" class="text-3xl font-bold text-white mb-4"></h2><p class="text-gray-300 mb-6">Select a theme to begin your adventure!</p><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><button class="theme-button bg-blue-900/50 text-blue-300 border-2 border-blue-700/50 hover:border-blue-500 font-bold py-3 px-4 rounded-lg transition-all" data-theme="Detective">Detective</button><button class="theme-button bg-purple-900/50 text-purple-300 border-2 border-purple-700/50 hover:border-purple-500 font-bold py-3 px-4 rounded-lg transition-all" data-theme="Fantasy">Fantasy</button><button class="theme-button bg-orange-900/50 text-orange-300 border-2 border-orange-700/50 hover:border-orange-500 font-bold py-3 px-4 rounded-lg transition-all" data-theme="Indian Epics">Indian Epics</button></div><button id="startStoryButton" class="start-story-btn w-full bg-yellow-400 text-slate-900 font-bold py-3 px-6 rounded-full hover:bg-yellow-300 transition-all transform hover:scale-105 glow-button opacity-50 cursor-not-allowed" disabled>Start Story</button></div></div>
    <div id="messageModal" class="modal modal-hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center opacity-0"><div class="modal-content bg-slate-800 rounded-2xl p-8 max-w-sm w-full mx-4 relative scale-95 text-center"><button id="closeMessageModalButton" class="absolute top-4 right-4 text-gray-400 hover:text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button><h2 id="messageModalTitle" class="text-2xl font-bold text-white mb-4">Notice</h2><p id="messageModalText" class="text-gray-300 mb-6">This feature is coming soon!</p><button id="messageModalOkButton" class="bg-yellow-400 text-slate-900 font-bold py-2 px-8 rounded-full hover:bg-yellow-300 transition-colors">OK</button></div></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let isLoggedIn = localStorage.getItem('isStudentLoggedIn') === 'true';
            let selectedTheme = null;
            let activeStoryTopicId = null;

            const elements = {
                signInButton: document.getElementById('signInButton'),
                signOutButton: document.getElementById('signOutButton'),
                authLinks: document.getElementById('auth-links'),
                welcomeMessage: document.getElementById('welcome-message'),
                welcomeUsernameDisplay: document.getElementById('welcome-username-display'),
                signInModal: document.getElementById('signInModal'),
                closeSignInModalButton: document.getElementById('closeModalButton'),
                signInForm: document.getElementById('signInForm'),
                messageDiv: document.getElementById('message'),
                // forgotPasswordLink: document.getElementById('forgotPasswordLink'), // Removed as it's not present in HTML from earlier
                messageModal: document.getElementById('messageModal'),
                closeMessageModalButton: document.getElementById('closeMessageModalButton'),
                messageModalOkButton: document.getElementById('messageModalOkButton'),
                messageModalText: document.getElementById('messageModalText'),
                storyCards: document.querySelectorAll('.story-card'),
                storyModal: document.getElementById('storyModal'),
                closeStoryModalButton: document.getElementById('closeStoryModalButton'),
                storyModalTitle: document.getElementById('storyModalTitle'),
                storyModalImage: document.getElementById('storyModalImage'),
                themeButtons: document.querySelectorAll('#storyModal .theme-button'),
                startStoryButton: document.getElementById('startStoryButton'),
                faqItems: document.querySelectorAll('.faq-item'),
                mobileMenuToggle: document.getElementById('mobile-menu-toggle'),
                mobileMenu: document.getElementById('mobile-menu')
            };

            const showModal = (modalElement) => {
                modalElement.classList.remove('modal-hidden');
                setTimeout(() => {
                    modalElement.classList.remove('opacity-0');
                    modalElement.querySelector('.modal-content').classList.remove('scale-95');
                }, 10);
            };

            const hideModal = (modalElement) => {
                modalElement.classList.add('opacity-0');
                modalElement.querySelector('.modal-content').classList.add('scale-95');
                setTimeout(() => modalElement.classList.add('modal-hidden'), 300);
            };

            const updateAuthState = () => {
                isLoggedIn = localStorage.getItem('isStudentLoggedIn') === 'true';
                const username = localStorage.getItem('username');

                if (isLoggedIn && username) {
                    elements.authLinks.classList.add('hidden');
                    elements.welcomeMessage.classList.remove('hidden');
                    elements.welcomeMessage.classList.add('flex');
                    elements.welcomeUsernameDisplay.textContent = `Welcome, ${username}!`;
                } else {
                    elements.authLinks.classList.remove('hidden');
                    elements.welcomeMessage.classList.add('hidden');
                    elements.welcomeMessage.classList.remove('flex');
                }
            };

            const handleSignIn = async (e) => {
                e.preventDefault();
                const username = elements.signInForm.querySelector('#username').value;
                const password = elements.signInForm.querySelector('#password').value;

                elements.messageDiv.textContent = ''; // Clear previous messages
                elements.messageDiv.className = 'text-center text-red-400 mb-4'; // Reset class for errors

                // Basic client-side check for minlength
                if (password.length < 8) {
                    elements.messageDiv.textContent = 'Password must be at least 8 characters long.';
                    return;
                }

                try {
                    const response = await fetch('/api/signin', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ username, password })
                    });
                    const result = await response.json();

                    if (response.ok) {
                        localStorage.setItem('isStudentLoggedIn', 'true');
                        localStorage.setItem('username', result.user.username);
                        localStorage.setItem('userId', result.user.id);
                        localStorage.setItem('userType', result.user.userType);
                        // Store the session token for authenticated API calls
                        if (result.sessionToken) {
                            localStorage.setItem('token', result.sessionToken);
                        }

                        elements.messageDiv.textContent = 'Login successful! Redirecting...';
                        elements.messageDiv.className = 'text-center text-green-400 mb-4';

                        if (result.user.userType === 'Admin') {
                            SecureDOM.safeTimeout(() => { window.location.href = '/iygighukijh.html'; }, 1500);
                        } else if (result.user.userType === 'Parent') {
                            SecureDOM.safeTimeout(() => { window.location.href = '/parent-portal.html'; }, 1500);
                        } else {
                            SecureDOM.safeTimeout(() => { window.location.href = '/dashboard.html'; }, 1500);
                        }
                    } else {
                        elements.messageDiv.textContent = result.message || 'An error occurred.';
                    }
                } catch (error) {
                    console.error('FETCH ERROR:', error);
                    elements.messageDiv.textContent = 'Could not connect to the server.';
                }
            };

            const handleSignOut = (e) => {
                e.preventDefault();
                localStorage.clear();
                window.location.href = '/';
            };

            const openStoryModal = (card) => {
                elements.storyModalTitle.textContent = card.dataset.storyTitle;
                elements.storyModalImage.src = card.dataset.storyImg;
                activeStoryTopicId = card.dataset.topicId || null;
                selectedTheme = null;
                elements.themeButtons.forEach(btn => btn.classList.remove('selected'));
                elements.startStoryButton.disabled = true;
                elements.startStoryButton.classList.add('opacity-50', 'cursor-not-allowed');
                showModal(elements.storyModal);
            };

            const selectTheme = (button) => {
                elements.themeButtons.forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                selectedTheme = button.dataset.theme;
                elements.startStoryButton.disabled = false;
                elements.startStoryButton.classList.remove('opacity-50', 'cursor-not-allowed');
            };

            const handleStartStory = () => {
                // Redirect to sign-in if user is not logged in
                if (!isLoggedIn) {
                    window.location.href = '/signin.html';
                    return;
                }
                if (!activeStoryTopicId || !selectedTheme) {
                    elements.messageModalText.textContent = "Please select both a story and a theme.";
                    showModal(elements.messageModal);
                    return;
                }

                window.location.href = `/story-player.html?topicId=${activeStoryTopicId}&theme=${selectedTheme}`;
            };

            const toggleFaq = (item) => {
                const answer = item.querySelector('.faq-answer');
                const icon = item.querySelector('svg');
                const isOpening = !answer.style.maxHeight || answer.style.maxHeight === '0px';

                elements.faqItems.forEach(otherItem => {
                    if (otherItem !== item) {
                        const otherAnswer = otherItem.querySelector('.faq-answer');
                        otherAnswer.style.maxHeight = '0px';
                        otherAnswer.style.opacity = '0';
                        otherItem.querySelector('svg').style.transform = 'rotate(0deg)';
                    }
                });

                if (isOpening) {
                    answer.style.opacity = '1';
                    answer.style.maxHeight = answer.scrollHeight + 'px';
                    icon.style.transform = 'rotate(180deg)';
                } else {
                    answer.style.opacity = '0';
                    answer.style.maxHeight = '0px';
                    icon.style.transform = 'rotate(0deg)';
                }
            };

            // --- Event Listeners ---
            elements.signOutButton.addEventListener('click', handleSignOut);

            elements.storyCards.forEach(card => card.addEventListener('click', () => {
                card.dataset.topicId = '1'; // Dummy Topic ID for demonstration
                openStoryModal(card);
            }));
            elements.themeButtons.forEach(button => button.addEventListener('click', () => selectTheme(button)));
            elements.startStoryButton.addEventListener('click', handleStartStory);
            elements.closeStoryModalButton.addEventListener('click', () => hideModal(elements.storyModal));
            elements.storyModal.addEventListener('click', (e) => { if (e.target === elements.storyModal) hideModal(elements.storyModal); });

            elements.faqItems.forEach(item => item.querySelector('.faq-question').addEventListener('click', () => toggleFaq(item)));

            elements.closeMessageModalButton.addEventListener('click', () => hideModal(elements.messageModal));
            elements.messageModalOkButton.addEventListener('click', () => hideModal(elements.messageModal));
            elements.messageModal.addEventListener('click', (e) => { if (e.target === elements.messageModal) hideModal(elements.messageModal); });
            elements.mobileMenuToggle.addEventListener('click', () => {
                elements.mobileMenu.classList.toggle('hidden');
            });

            updateAuthState();
        });
    </script>
    <div id="flag-modal" class="modal modal-hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center opacity-0">
        <div class="modal-content bg-slate-800 rounded-2xl p-8 max-w-md w-full mx-4 relative scale-95">
            <button id="close-flag-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <h2 class="text-2xl font-bold text-white mb-4">Report Issue</h2>
            <textarea id="flag-reason" class="w-full h-32 bg-slate-700 text-gray-200 p-2 rounded-md mb-4" placeholder="Describe the issue (optional)"></textarea>
            <button id="submit-flag-btn" class="bg-yellow-400 text-slate-900 font-bold py-2 px-6 rounded-full hover:bg-yellow-300 w-full">Submit</button>
        </div>
    </div>
    <!-- Back to Top button -->
    <button id="backToTop" aria-label="Back to top"
      class="hidden fixed bottom-20 right-4 px-4 py-2 rounded-full bg-yellow-400 text-black shadow-lg transition-opacity duration-300">
      â Top
    </button>
    <script src="/static/js/flagModal.js"></script>
    <script src="/static/js/flagErrorButton.js"></script>
    <script src="/static/js/imgFallback.js"></script>
    <script src="/static/js/backToTop.js"></script>
    <!-- Prevent tour and level displays on index page -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Remove any tour overlays or popups that might appear
        const removeTourElements = () => {
          const tourElements = document.querySelectorAll('[id*="tour"], [class*="tour"], [id*="level"], [class*="level"]');
          tourElements.forEach(element => {
            if (element.style.position === 'fixed' || element.style.position === 'absolute' || 
                element.classList.contains('overlay') || element.classList.contains('popup') ||
                element.classList.contains('modal')) {
              element.remove();
            }
          });
        };

        // Remove immediately and set up observer for dynamic content
        removeTourElements();
        
        // Set up mutation observer to remove any dynamically added tour/level elements
        const observer = new MutationObserver(() => {
          removeTourElements();
        });
        
        observer.observe(document.body, {
          childList: true,
          subtree: true
        });

        // Handle start story button clicks
        document.querySelectorAll('.start-story-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const userId = localStorage.getItem('userId');
            if (!userId) {
              // User not logged in; redirect to sign-in page.
              window.location.href = '/signin.html';
            } else {
              // TODO: Navigate to the actual story player once implemented.
              alert('Launching story for logged-in user...');
            }
          });
        });
      });
    </script>
</body>
</html>
